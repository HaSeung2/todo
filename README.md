# JPA를 활용한 일정 관리 API 만들기

## API 명세서
https://documenter.getpostman.com/view/21774594/2sAXxV4pXx

## ERD
![2](https://github.com/user-attachments/assets/13b19bea-ee95-42bf-b176-3c0409ccd94b)


# 기능 구현
### Lv 1. 일정 CRUD 

- [ ]  일정을 저장, 조회, 수정, 삭제할 수 있습니다.
- [ ]  일정은 아래 필드를 가집니다.
    - [ ]  `작성 유저명`, `할일 제목`, `할일 내용`, `작성일`, `수정일` 필드
- [ ]  삭제의 경우
    - [ ]  일정을 삭제할 때 일정의 댓글도 함께 삭제
    - [ ]  이 때, JPA의 영속성 전이 기능을 활용
### Lv 2. 댓글 CRUD 

- [ ]  기 생성한 일정에 댓글을 남길 수 있습니다.
    - [ ]  댓글과 일정은 연관관계를 가집니다.
- [ ]  댓글을 저장, 조회, 수정, 삭제할 수 있습니다.
- [ ]  댓글은 아래와 같은 필드를 가집니다.
    - [ ]  `댓글 내용`, `작성일`, `수정일`, `작성 유저명` 필드 
  
### Lv 3. 일정 페이징 조회 

- [ ]  일정을 Spring Data JPA의 `Pageable`과 `Page` 인터페이스를 활용하여 페이지네이션을 구현
    - [ ]  `페이지 번호`와 `페이지 크기`를 쿼리 파라미터로 전달하여 요청하는 항목을 나타냅니다.
    
    - [ ]  `할일 제목`, `할일 내용`, `댓글 개수`, `일정 작성일`, `일정 수정일`, `일정 작성 유저명` 필드를 조회합니다.
    - [ ]  디폴트 `페이지 크기`는 10으로 적용합니다.
- [ ]  일정의 `수정일`을 기준으로 내림차순 정렬합니다.

### Lv 4. 유저 CRUD 

- [ ]  유저를 저장, 조회, 삭제할 수 있습니다.
- [ ]  유저는 아래와 같은 필드를 가집니다.
    - [ ]  `유저명`, `이메일`, `작성일`, `수정일` 필드
- [ ]  일정은 이제 `작성 유저명` 필드 대신 `유저 고유 식별자` 필드를 가집니다.
- [ ]  일정을 작성한 유저는 추가로 일정 담당 유저들을 배치할 수 있습니다.
    - [ ]  유저와 일정은 N:M 관계입니다.
    - [ ]  JPA 지연로딩을 활용합니다. (EAGER → LAZY) 

### Lv 5. 다양한 예외처리 적용하기 

- [ ]  validation을 활용해 다양한 예외처리를 적용해 봅니다.
- [ ]  정해진 예외처리 항목이 있는것이 아닌 프로젝트를 분석하고 예외사항을 지정해 봅니다.
    - [ ]  Ex) 할일 제목은 10글자 이내, 유저명은 4글자 이내
    - [ ]  @Pattern을 사용해서 회원 가입 Email 데이터 검증 등 

### Lv 6. 회원가입(JWT)

- [ ]  유저에 `비밀번호` 필드를 추가합니다.
    - [ ]  비밀번호는 암호화되어야 합니다.
    - [ ]  암호화를 위한 `PasswordEncoder`를 직접 만들어 사용합니다.
- [ ]  유저 최초 생성(회원가입) 시 JWT를 발급 후 반환

### Lv 7. 로그인(인증)

- [ ]  **설명**
    - [ ]  JWT를 활용해 로그인 기능을 구현합니다.
    - [ ]  필터를 활용해 인증 처리를 할 수 있습니다.
- [ ]  **조건**
    - [ ]  `이메일`과 `비밀번호`를 활용해 로그인 기능을 구현합니다.
        - [ ]  로그인 성공 시 JWT  발급 후 반환합니다.
    - [ ]  모든 요청에서 토큰을 활용하여 인증 처리를 합니다.
        - [ ]  토큰은 `Header`에 추가합니다.
    - [ ]  회원가입과 로그인은 인증 처리에서 제외합니다.
- [ ]  **예외처리**
    - [ ]  로그인 시 이메일과 비밀번호가 일치하지 않을 경우 401을 반환합니다.
    - [ ]  토큰이 없는 경우 400을 반환합니다.
    - [ ]  유효 기간이 만료된 토큰의 경우 401을 반환합니다.

### Lv 8. 권한 확인(인가)

- [ ]  조건
    - [ ]  유저에 `권한`을 추가합니다.
        - [ ]  권한은 `관리자`, `일반 사용자` 두 가지가 존재합니다.
        - [ ]  JWT를 발급할 때 유저의 권한 정보를 함께 넣어줍니다.
    - [ ]  일정 수정 및 삭제는 `관리자` 권한이 있는 유저만 할 수 있습니다.
- [ ]  예외처리
    - [ ]  권한이 없는 유저의 경우 403을 반환합니다. —> 권한이 없는 유저가 일정 수정 및 삭제를 요청했을 때

### Lv 9. 외부 API 조회

- [ ]  조건
    - [ ]  [**날씨 정보 데이터(링크)**](https://f-api.github.io/f-api/weather.json) API를 활용하여 오늘의 날씨를 조회할 수 있습니다.
        - [ ]  `RestTemplate`을 사용해 날씨를 조회합니다.
    - [ ]  일정에 `날씨` 필드를 추가합니다.
        - [ ]  일정 생성 시에 날씨 정보를 생성일 기준으로 저장할 수 있습니다.















